---
title: Vim常用操作
date: 2016-12-09 14:44:35
tags: Vim
---
本文内容是基于网络资源整理，首先介绍Vim的操作模式，然后列举一些Vim常用操作和技巧，以后会不定期更新。

## Vim操作模式
![Vim操作模式](vim_mode_switch.png)
### 1. 普通模式
Vim的默认模式，使用`vim`命令打开文件后默认进入该模式。Vim的大部分操作命令都在该模式下执行

### 2. 插入模式
即是编辑模式，在默认模式下输入`i/I/a/A/o/O`等命令进入该模式，此时Vim与普通编辑器类似

### 3. 插入-普通模式
临时由插入模式切换为普通模式，执行一次命令后将自动切换为普通模式，快捷键是`<C-o>(ctrl+o)`

### 4. 替换模式
该模式下输出内容将替换文档中已有内容，使用`r`命令进入该模式后，替换一次就自动切换为普通模式，使用`R`命令将保持在该模式

### 5. 虚拟替换模式
该模式下将tab当成一组空格进行处理，假如tab宽度为4，输入前3个字符时，每个字符会被插入到tab之前，当输入第4个字符时才会替换tab

### 6. 可视模式
该模式用于选择一块文本区域，使用`v`命令进入该模式是面向字符进行选择，使用`V(shift+v)`是面向行，使用`<C-v>(ctrl+v)`是面向列

### 7. 选择模式
在可视模式下，使用`<C-g>(ctrl+g)`命令将进入选择模式，该模式下输入任何可见字符将替换掉选择的文本并进入编辑模式

### 8. 命令模式
在普通模式下输入执行命令`:`，搜索命令`/`和`？`，或者过滤命令`!`等可进入命令模式，命令执行后自动返回到普通模式；另外有一种Ex模式，在普通模式下输入`Q(shift+q)`进入。Ex模式与命令模式比较相似，在使用`:visual`命令离开Ex模式前，可以一次执行多条命令

## 常用操作
### 1. 移动光标
+ 在插入模式和替换模式以外，都可以使用`h`，`j`，`k`，`l`来分别实现左，下，上，右方向移动的功能。如果Vim对超过一行的内容执性自动换行，而我们想要仍然按照显示的一行来移动，那么可以在按`h`，`j`，`k`，`l`之前键入一个g
+ 在当前行内移动光标，可以使用的motion命令：
 - `fx`：移动光标到当前行的下一个x处，其中x需要换成想要移动到的字符名。而且你可以使用`;`来重复上一次执行的`f`命令
 - `tx`：与上面命令类似，但是是移动到x的左边一个位置
 - `Fx`：与`fx`类似，方向是向前找
 - `w`：光标向前移动一个词
 - `b`：光标向后移动一个词
 - `0`：移动光标到当前行首
 - `^`：移动光标到当前行的第一个字母位置（注意与`0`的区别）
 - `$`：移动光标到行尾
 - `)`：移动光标到下一个句子。句子的判断方式是依据英文断句标准（`. `或者空一行），因此也可以在行间移动
 - `(`：移动光标到上一个句子
+ 在当前文件内移动光标，可以使用的motion命令：
 - `}`：移动光标到下一个段落。段落的判断方式是是否空一行
 - `{`：移动光标到上一个段落
 - `<C-f>`：光标向下移动一屏
 - `<C-b>`：光标向上移动一屏
 - `G`：移动光标到文件尾
 - `nG`：移动光标到指定的行，其中n需要替换成移动到的行号（如`10G`代表移动到第10行）
 - `gg`：移动光标到文件首
 - `H`：移动光标到当前屏幕的第一行
 - `M`：移动光标到当前屏幕的中间位置
 - `L`：移动光标到当前屏幕的最后一行
 - `*`：读取光标处的词，并且移动光标到它再次出现的位置。注意下划线连接的两个字符串作为一个词（如abc_def作为一个词被查找）
 - `#`：与`*`类似，但是往反方向查找。两个命令都是循环查找
 - `/text`：从当前光标处开始搜索字符串text，并将光标移动到text出现的位置。如果想重复上次的搜索，按`n`（上面的`*`和`#`也可以使用`n`做重复查找）
 - `?text`：与`/text`类似，但是往反方向查找
 - `ma`：在当前光标位置标记一个书签，名字为a。书签名只能是小写字母
 - ``a`：跳转到书签a处。注意本命令不是单引号，它一般位于键盘的1键的左边
 - ``.`：跳转到上次编辑文件的位置。推荐使用，而且不需要你去标记它

### 2. 编辑内容
+ 关键字自动补全。输入开始几个字母后，按`<C-n>`或`<C-p>`，Vim将列举所有可能的关键字，如果只有唯一的关键字，Vim将自动补全。连续按`<C-n>`或`<C-p>`将循环选择下一个关键字
+ 进入插入模式的命令有多种，只是插入的位置不同：
 - `i`：在光标所在字符的左边插入
 - `I`：在光标所在行的行首插入
 - `a`：在光标所在字符的右边插入
 - `A`：在光标所在行的行尾插入
 - `o`：在光标所在行的下面插入一个新行
 - `O`：在光标所在行的上面插入一个新行
 - `c{motion}`：删除motion命令跨过的字符并进入插入模式，删除的字符包含移动光标后光标所在位置的字符。如`c$`将删除从光标位置到行尾的字符并进入插入模式；`ct!`将删除从光标位置到下一个叹号（但不包括）位置间的字符并进入插入模式。其中，被删除的字符保存在剪切板中，可以再粘贴出来
 - `d{motion}`：与上面命令相似，也删除motion命令跨过的字符，但是不会进入插入模式
+ 移动大段的文本
 - 使用可视模式移动文本。首先，选择合适的可视模式：
    * `v`：按字符选择
    * `V`：按行选择
    * `<C-v>`：按块选择

    进入可视模式后可以使用方向键和motion命令进行选择，如`vwww`会高亮选择光标的前三个单词；如`Vjj`将会高亮选择当前行以及下面两行。高亮选择内容后，可以执行剪切和拷贝命令：
    * `d`：剪切选择的内容到剪贴板
    * `y`：拷贝选择的内容到剪贴板
    * `c`：剪切选择的内容到剪贴板并且进入插入模式


### X. 其他操作


## 参考链接

[高效率编辑器 Vim](https://linuxtoy.org/archives/efficient-editing-with-vim.html)
[无插件Vim编程技巧](http://coolshell.cn/articles/11312.html)
[vi/vim cheat sheet](http://sheet.shiar.nl/vi)